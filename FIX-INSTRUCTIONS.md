# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## –°–µ—Ä–≤–µ—Ä: 164.68.109.208
## –ü—Ä–æ–µ–∫—Ç: /var/www/mo

---

## üìã –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@164.68.109.208

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/mo

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
bash check-nginx-config.sh
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –¢–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
- –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –µ—Å—Ç—å –≤ dist/assets
- –ß—Ç–æ —Å—Å—ã–ª–∞–µ—Ç—Å—è –≤ index.html
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã curl —Ç–µ—Å—Ç–æ–≤

---

## üîß –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
cd /var/www/mo
bash fix-nginx-cache.sh
```

### –í—Ä—É—á–Ω—É—é:

```bash
# 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp nginx-fix.conf /etc/nginx/sites-available/mo
sudo ln -sf /etc/nginx/sites-available/mo /etc/nginx/sites-enabled/mo

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
sudo nginx -t

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å
sudo systemctl reload nginx

# 4. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
sudo rm -rf /var/cache/nginx/*
```

---

## üåê –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. **–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞:**
   - `Ctrl + Shift + Delete` ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
   - –ò–ª–∏ `Ctrl + Shift + R` (–∂–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
   - –ò–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

2. **–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç:**
   ```
   http://164.68.109.208
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ DevTools:**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools (F12)
   - –í–∫–ª–∞–¥–∫–∞ Network
   - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ `.js` —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å `Status: 200`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `Content-Type: application/javascript`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. index.html –Ω–µ –¥–æ–ª–∂–µ–Ω –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å—Å—è
curl -I http://164.68.109.208/index.html | grep Cache-Control
# –û–∂–∏–¥–∞–µ—Ç—Å—è: Cache-Control: no-store, no-cache

# 2. –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π asset –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404
curl -I http://164.68.109.208/assets/fake.js
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP/1.1 404 Not Found

# 3. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π asset –¥–æ–ª–∂–µ–Ω –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å—Å—è
curl -I http://164.68.109.208/assets/index-*.js | grep Cache-Control
# –û–∂–∏–¥–∞–µ—Ç—Å—è: Cache-Control: public, immutable
```

---

## üîÑ –î–ª—è –±—É–¥—É—â–∏—Ö –¥–µ–ø–ª–æ–µ–≤

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `npm run build`:

```bash
# 1. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ
npm run build

# 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –º–µ—Ç–æ–¥)
scp -r dist/* root@164.68.109.208:/var/www/mo/dist/

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ssh root@164.68.109.208 "pm2 restart mo"

# 4. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π deploy —Å–∫—Ä–∏–ø—Ç:
```bash
bash deploy-164.sh
```

---

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx:**
   ```bash
   sudo tail -f /var/log/nginx/error.log
   sudo tail -f /var/log/nginx/access.log
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç:**
   ```bash
   ls -la /var/www/mo/dist/assets/
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   sudo chown -R www-data:www-data /var/www/mo/dist
   sudo chmod -R 755 /var/www/mo/dist
   ```

4. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx:**
   ```bash
   sudo systemctl restart nginx
   ```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
1. –í—ã–≤–æ–¥ `bash check-nginx-config.sh`
2. –°–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (DevTools ‚Üí Console)
3. –°–∫—Ä–∏–Ω—à–æ—Ç Network –≤–∫–ª–∞–¥–∫–∏ (DevTools ‚Üí Network)
