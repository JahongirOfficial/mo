# üö® –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## –ü—Ä–æ–±–ª–µ–º–∞
```
Failed to load module script: Expected a JavaScript module script 
but the server responded with a MIME type of "text/html"
```

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 164.68.109.208)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (164.68.109.208)
ssh root@164.68.109.208
cd /var/www/mo
bash fix-nginx-cache.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@164.68.109.208

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/mo

# 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp nginx-fix.conf /etc/nginx/sites-available/mo
sudo ln -sf /etc/nginx/sites-available/mo /etc/nginx/sites-enabled/mo

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å nginx
sudo systemctl reload nginx

# 6. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à nginx (–µ—Å–ª–∏ –µ—Å—Ç—å)
sudo rm -rf /var/cache/nginx/*
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –ù–∞–∂–º–∏—Ç–µ `Ctrl + Shift + Delete`
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à
3. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
4. –ò–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ –∂–µ—Å—Ç–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É: `Ctrl + Shift + R`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ index.html –Ω–µ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è
curl -I http://164.68.109.208/index.html | grep Cache-Control
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Cache-Control: no-store, no-cache

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π asset –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
curl -I http://164.68.109.208/assets/fake-file.js
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: HTTP/1.1 404 Not Found

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx
cat /etc/nginx/sites-available/mo
```

## üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ `index.html` —Ç–µ–ø–µ—Ä—å **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è
2. ‚úÖ `/assets/*` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **404** –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ (–Ω–µ index.html!)
3. ‚úÖ `/assets/*` –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 1 –≥–æ–¥ (immutable) –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

## üéØ –î–ª—è –±—É–¥—É—â–∏—Ö –¥–µ–ø–ª–æ–µ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
bash deploy-164.sh
```

–û–Ω —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx.
